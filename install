#!/bin/bash

# Install program and dependencies, if doesn't yet exist.
[[ -z command -v xclip ]] && sudo apt-get install -y xclip
if [[ -z `command -v "tmux"` ]]; then
	# Install Dependencies
	evnDependencies="cvs gcc make autoconf automake libtool libglib2.0-dev libslang2-dev intltool"
	for evnDependency in $evnDependencies; do
		[[ -z command -v ${evnDependency} ]] && sudo apt-get install -y ${evnDependency}
	done

	# Install Tmux via Git repository for latest version
	sudo apt-get build-dep tmux
	cd /usr/local/share
	sudo git clone https://github.com/ThomasAdam/tmux.git
	cd tmux
	sudo ./autogen.sh
	sudo ./configure --prefix=/usr/local
	sudo make
	sudo make install
done

# Link configurations
ln -s .tmux.conf $HOME/.tmux.conf
ln -s .tmux-powerlinerc $HOME/.tmux-powerlinerc

# Install libraries
[[ -z command -v tmuxinator ]] && gem install tmuxinator
ln -s $HOME/Dropbox/Config/.tmuxinator/ $HOME/.tmuxinator/

#WeMux
ln -s lib/wemux/wemux bin/wemux
sudo cp lib/wemux/wemux.conf.example /usr/local/etc/wemux.conf
sudo sed -i "s/change_this/$USER/g" /usr/local/etc/wemux.conf